<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Oracle SQL & PL/SQL ãƒ¡ãƒ¢ + MySQLæ¯”è¼ƒ</title>
  <style>
    body { font-family: sans-serif; line-height: 1.6; background-color: #f9f9f9; padding: 2rem; color: #333; }
    h1, h2, h3 { color: #004080; }
    code, pre { background-color: #f0f0f0; padding: 0.3rem 0.5rem; border-radius: 5px; display: block; overflow-x: auto; }
    table { border-collapse: collapse; width: 100%; margin: 1rem 0; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    th { background-color: #e0e0e0; }
    blockquote { background-color: #eaf4ff; padding: 0.5rem 1rem; border-left: 5px solid #007acc; }
  </style>
</head>
<body>

<h1>ğŸ“˜ Oracle SQL & PL/SQL ãƒ¡ãƒ¢ + MySQLæ¯”è¼ƒ</h1>

<p>Oracle SQL ã¨ PL/SQL ã®åŸºæœ¬æ§‹æ–‡ã€å®Ÿç”¨ä¾‹ã€MySQL ã¨ã®æ§‹æ–‡å·®ç•°ã‚’ã¾ã¨ã‚ãŸè³‡æ–™ã§ã™ã€‚</p>

<h2>ğŸ”¹ SQL åŸºæœ¬æ–‡æ³•</h2>

<h3>SELECT</h3>
<pre><code>SELECT column1, column2
FROM table_name
WHERE æ¡ä»¶;
</code></pre>

<h3>INSERT</h3>
<pre><code>INSERT INTO table_name (col1, col2)
VALUES ('value1', 'value2');
</code></pre>

<h3>UPDATE</h3>
<pre><code>UPDATE table_name
SET col1 = 'value1'
WHERE æ¡ä»¶;
</code></pre>

<h3>DELETE</h3>
<pre><code>DELETE FROM table_name
WHERE æ¡ä»¶;
</code></pre>

<h2>ğŸ”¹ æ¡ä»¶å¼ãƒ»ãƒ­ã‚¸ãƒƒã‚¯</h2>

<pre><code>NVL(column, '')</code></pre>

<pre><code>SELECT * FROM emp WHERE deptno IN (10, 20, 30);</code></pre>

<pre><code>SELECT * FROM emp WHERE name LIKE '%å¯¾è±¡%';</code></pre>

<pre><code>SELECT name,
       CASE WHEN salary > 10000 THEN 'High'
            WHEN salary > 5000 THEN 'Mid'
            ELSE 'Low' END AS salary_range
FROM employees;
</code></pre>

<h2>ğŸ”¹ æ–‡å­—åˆ—å‡¦ç†ãƒ»å‹å¤‰æ›</h2>

<pre><code>TRIM(column)
REPLACE(column, '-', '')
LOWER(column) / UPPER(column)
TO_CHAR(date, 'YYYY-MM-DD')
TO_NUMBER('123')
TO_DATE('2024-01-01', 'YYYY-MM-DD')</code></pre>

<h2>ğŸ”¹ å‰¯å•ã„åˆã‚ã›</h2>

<h3>ã‚¹ã‚«ãƒ©ã‚µãƒ–ã‚¯ã‚¨ãƒª</h3>
<pre><code>SELECT name,
       (SELECT dept_name FROM dept WHERE dept.deptno = emp.deptno) AS dept_name
FROM emp;
</code></pre>

<h3>WHEREå¥ã§ä½¿ç”¨</h3>
<pre><code>SELECT * FROM emp
WHERE salary > (SELECT AVG(salary) FROM emp);
</code></pre>

<h3>IN + ã‚µãƒ–ã‚¯ã‚¨ãƒª</h3>
<pre><code>SELECT * FROM emp
WHERE deptno IN (SELECT deptno FROM dept WHERE location = 'TOKYO');
</code></pre>

<h3>EXISTS</h3>
<pre><code>SELECT * FROM dept d
WHERE EXISTS (
  SELECT 1 FROM emp e WHERE e.deptno = d.deptno
);
</code></pre>

<h3>ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ“ãƒ¥ãƒ¼</h3>
<pre><code>SELECT deptno, avg_sal
FROM (
  SELECT deptno, AVG(sal) AS avg_sal
  FROM emp
  GROUP BY deptno
) sub
WHERE avg_sal > 1000;
</code></pre>

<h3>WITHå¥ï¼ˆMySQL 8.0+ï¼‰</h3>
<pre><code>WITH dept_avg AS (
  SELECT deptno, AVG(sal) AS avg_sal
  FROM emp
  GROUP BY deptno
)
SELECT *
FROM emp e
JOIN dept_avg d ON e.deptno = d.deptno;
</code></pre>

<h2>ğŸ”¹ PL/SQL ã‚«ãƒ¼ã‚½ãƒ«</h2>

<h3>åŸºæœ¬æ§‹æ–‡</h3>
<pre><code>DECLARE
  v_name VARCHAR2(100);
BEGIN
  v_name := 'Oracle';
  DBMS_OUTPUT.PUT_LINE('Hello ' || v_name);
END;
</code></pre>

<h3>æ˜ç¤ºã‚«ãƒ¼ã‚½ãƒ«</h3>
<pre><code>DECLARE
  CURSOR cur_emp IS SELECT empno, ename FROM emp;
  v_empno emp.empno%TYPE;
  v_ename emp.ename%TYPE;
BEGIN
  OPEN cur_emp;
  LOOP
    FETCH cur_emp INTO v_empno, v_ename;
    EXIT WHEN cur_emp%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(v_ename);
  END LOOP;
  CLOSE cur_emp;
END;
</code></pre>

<h3>FORã‚«ãƒ¼ã‚½ãƒ« + COUNT</h3>
<pre><code>DECLARE
  CURSOR cur_dept IS SELECT deptno FROM dept;
  wcount NUMBER;
BEGIN
  FOR rec IN cur_dept LOOP
    SELECT COUNT(*) INTO wcount FROM emp WHERE deptno = rec.deptno;
    DBMS_OUTPUT.PUT_LINE('Dept: ' || rec.deptno || ' Count: ' || wcount);
  END LOOP;
END;
</code></pre>

<h2>ğŸ”„ Oracle vs MySQL æ¯”è¼ƒ</h2>

<table>
  <thead>
    <tr><th>é …ç›®</th><th>Oracle</th><th>MySQL</th><th>å‚™è€ƒ</th></tr>
  </thead>
  <tbody>
    <tr><td>LIMITå¥</td><td>ROWNUM / FETCH</td><td>LIMIT</td><td>Oracle 12c+</td></tr>
    <tr><td>æ–‡å­—åˆ—é€£çµ</td><td>'A' || 'B'</td><td>CONCAT('A','B')</td><td>`||`ã¯MySQLã§ã¯OR</td></tr>
    <tr><td>æ—¥ä»˜åŠ ç®—</td><td>SYSDATE + 1</td><td>DATE_ADD(NOW(), INTERVAL 1 DAY)</td><td>æ§‹æ–‡å·®ã‚ã‚Š</td></tr>
    <tr><td>DUALãƒ†ãƒ¼ãƒ–ãƒ«</td><td>å¿…è¦</td><td>ä¸è¦</td><td>MySQLã¯ `SELECT 1` ã§OK</td></tr>
    <tr><td>WITHå¥ï¼ˆCTEï¼‰</td><td>å¯</td><td>8.0ä»¥é™ã®ã¿</td><td>MySQL 5.xã§ã¯ä¸å¯</td></tr>
    <tr><td>ã‚·ãƒ¼ã‚±ãƒ³ã‚¹</td><td>SEQUENCE + NEXTVAL</td><td>AUTO_INCREMENT</td><td>ä»•çµ„ã¿ãŒç•°ãªã‚‹</td></tr>
  </tbody>
</table>

<h2>âš ï¸ æ³¨æ„ç‚¹</h2>
<ul>
  <li><code>SELECT INTO</code> ã¯1è¡Œé™å®šï¼ˆè¤‡æ•°è¡Œã ã¨ <code>TOO_MANY_ROWS</code> ã‚¨ãƒ©ãƒ¼ï¼‰</li>
  <li><code>NOT IN</code> + <code>NULL</code> ã¯çµæœãŒ0è¡Œã«ãªã‚‹å¯èƒ½æ€§</li>
  <li><code>||</code> ã¯ Oracle ã§ã¯æ–‡å­—é€£çµã€MySQL ã§ã¯ OR ã«ãªã‚‹</li>
  <li>MySQL 8.0 ã‚ˆã‚Šå‰ã¯ <code>WITHå¥</code> æœªå¯¾å¿œ</li>
</ul>

<blockquote>âœï¸ ã“ã®HTMLã¯å­¦ç¿’ãƒ»æ¥­å‹™ç”¨ã«è‡ªç”±ã«ç·¨é›†ãƒ»æ‹¡å¼µã—ã¦ãŠä½¿ã„ãã ã•ã„ã€‚</blockquote>

</body>
</html>
